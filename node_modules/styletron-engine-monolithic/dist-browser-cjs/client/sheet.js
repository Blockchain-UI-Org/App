"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.StyleSheet = void 0;

/* eslint-env browser */

/*
pretty much vendored @emotion/sheet
Based off glamor's StyleSheet, thanks Sunil ❤️
high performance StyleSheet for css-in-js systems
- uses multiple style tags behind the scenes for millions of rules
- uses `insertRule` for appending in production for *much* faster performance
// usage
import { StyleSheet } from '@emotion/sheet'
let styleSheet = new StyleSheet({ container: document.head })
styleSheet.insert('#box { border: 1px solid red; }')
- appends a css rule into the stylesheet
styleSheet.flush()
- empties the stylesheet of all its contents
*/
// $FlowFixMe
function sheetForTag(tag) {
  if (tag.sheet) {
    return tag.sheet;
  } // this weirdness brought to you by firefox

  /* istanbul ignore next */


  for (let i = 0; i < document.styleSheets.length; i++) {
    if (document.styleSheets[i].ownerNode === tag) {
      // $FlowFixMe
      return document.styleSheets[i];
    }
  }
}

function createStyleElement(options) {
  const tag = document.createElement("style");

  if (typeof options.nonce !== "undefined") {
    tag.setAttribute("nonce", options.nonce);
  }

  tag.appendChild(document.createTextNode(""));
  return tag;
}

class StyleSheet {
  constructor(options) {
    this.isSpeedy = typeof options.speedy === "undefined" ? !(process.env.NODE_ENV !== "production") : options.speedy;
    this.tags = [];
    this.ctr = 0;
    this.nonce = options.nonce;
    this.container = options.container;
    this.before = null;
  }

  insert(rules) {
    // the max length is how many rules we have per style tag, it's 65000 in speedy mode
    // it's 1 in dev because we insert source maps that map a single rule to a location
    // and you can only have one source map per style tag
    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {
      const tag = createStyleElement(this);
      let before;

      if (this.tags.length === 0) {
        before = this.before;
      } else {
        before = this.tags[this.tags.length - 1].nextSibling;
      }

      this.container.insertBefore(tag, before);
      this.tags.push(tag);
    }

    const tag = this.tags[this.tags.length - 1];

    if (this.isSpeedy) {
      const sheet = sheetForTag(tag);
      rules.forEach(rule => {
        try {
          // this is the ultrafast version, works across browsers
          // the big drawback is that the css won't be editable in devtools
          sheet.insertRule(rule, sheet.cssRules.length);
        } catch (e) {
          if (process.env.NODE_ENV !== "production") {
            // eslint-disable-next-line no-console
            console.warn(`There was a problem inserting the following rule: "${rule}"`, e);
          }
        }
      });
    } else {
      tag.appendChild(document.createTextNode(rules.join("")));
    }

    this.ctr++;
  }

  flush() {
    // $FlowFixMe
    this.tags.forEach(tag => tag.parentNode.removeChild(tag));
    this.tags = [];
    this.ctr = 0;
  }

}

exports.StyleSheet = StyleSheet;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzaGVldEZvclRhZyIsInRhZyIsInNoZWV0IiwiaSIsImRvY3VtZW50Iiwic3R5bGVTaGVldHMiLCJsZW5ndGgiLCJvd25lck5vZGUiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJvcHRpb25zIiwiY3JlYXRlRWxlbWVudCIsIm5vbmNlIiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsIlN0eWxlU2hlZXQiLCJjb25zdHJ1Y3RvciIsImlzU3BlZWR5Iiwic3BlZWR5IiwidGFncyIsImN0ciIsImNvbnRhaW5lciIsImJlZm9yZSIsImluc2VydCIsInJ1bGVzIiwibmV4dFNpYmxpbmciLCJpbnNlcnRCZWZvcmUiLCJwdXNoIiwiZm9yRWFjaCIsInJ1bGUiLCJpbnNlcnRSdWxlIiwiY3NzUnVsZXMiLCJlIiwiY29uc29sZSIsIndhcm4iLCJqb2luIiwiZmx1c2giLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiXSwic291cmNlcyI6WyJzcmMvY2xpZW50L3NoZWV0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuLypcbnByZXR0eSBtdWNoIHZlbmRvcmVkIEBlbW90aW9uL3NoZWV0XG5CYXNlZCBvZmYgZ2xhbW9yJ3MgU3R5bGVTaGVldCwgdGhhbmtzIFN1bmlsIOKdpO+4j1xuaGlnaCBwZXJmb3JtYW5jZSBTdHlsZVNoZWV0IGZvciBjc3MtaW4tanMgc3lzdGVtc1xuLSB1c2VzIG11bHRpcGxlIHN0eWxlIHRhZ3MgYmVoaW5kIHRoZSBzY2VuZXMgZm9yIG1pbGxpb25zIG9mIHJ1bGVzXG4tIHVzZXMgYGluc2VydFJ1bGVgIGZvciBhcHBlbmRpbmcgaW4gcHJvZHVjdGlvbiBmb3IgKm11Y2gqIGZhc3RlciBwZXJmb3JtYW5jZVxuLy8gdXNhZ2VcbmltcG9ydCB7IFN0eWxlU2hlZXQgfSBmcm9tICdAZW1vdGlvbi9zaGVldCdcbmxldCBzdHlsZVNoZWV0ID0gbmV3IFN0eWxlU2hlZXQoeyBjb250YWluZXI6IGRvY3VtZW50LmhlYWQgfSlcbnN0eWxlU2hlZXQuaW5zZXJ0KCcjYm94IHsgYm9yZGVyOiAxcHggc29saWQgcmVkOyB9Jylcbi0gYXBwZW5kcyBhIGNzcyBydWxlIGludG8gdGhlIHN0eWxlc2hlZXRcbnN0eWxlU2hlZXQuZmx1c2goKVxuLSBlbXB0aWVzIHRoZSBzdHlsZXNoZWV0IG9mIGFsbCBpdHMgY29udGVudHNcbiovXG5cbmRlY2xhcmUgdmFyIF9fREVWX186IGJvb2xlYW47XG5cbi8vICRGbG93Rml4TWVcbmZ1bmN0aW9uIHNoZWV0Rm9yVGFnKHRhZzogSFRNTFN0eWxlRWxlbWVudCk6IENTU1N0eWxlU2hlZXQge1xuICBpZiAodGFnLnNoZWV0KSB7XG4gICAgcmV0dXJuIHRhZy5zaGVldDtcbiAgfVxuXG4gIC8vIHRoaXMgd2VpcmRuZXNzIGJyb3VnaHQgdG8geW91IGJ5IGZpcmVmb3hcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChkb2N1bWVudC5zdHlsZVNoZWV0c1tpXS5vd25lck5vZGUgPT09IHRhZykge1xuICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgcmV0dXJuIGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgdHlwZSBPcHRpb25zID0ge1xuICBub25jZT86IHN0cmluZztcbiAgY29udGFpbmVyOiBFbGVtZW50O1xuICBzcGVlZHk/OiBib29sZWFuO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnM6IHtub25jZTogc3RyaW5nIHwgdm9pZH0pOiBIVE1MU3R5bGVFbGVtZW50IHtcbiAgY29uc3QgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICBpZiAodHlwZW9mIG9wdGlvbnMubm9uY2UgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB0YWcuc2V0QXR0cmlidXRlKFwibm9uY2VcIiwgb3B0aW9ucy5ub25jZSk7XG4gIH1cbiAgdGFnLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpKTtcbiAgcmV0dXJuIHRhZztcbn1cblxuZXhwb3J0IGNsYXNzIFN0eWxlU2hlZXQge1xuICBpc1NwZWVkeTogYm9vbGVhbjtcbiAgY3RyOiBudW1iZXI7XG4gIHRhZ3M6IEhUTUxTdHlsZUVsZW1lbnRbXTtcbiAgY29udGFpbmVyOiBFbGVtZW50O1xuICBub25jZTogc3RyaW5nIHwgdm9pZDtcbiAgYmVmb3JlOiBFbGVtZW50IHwgbnVsbDtcbiAgY29uc3RydWN0b3Iob3B0aW9uczogT3B0aW9ucykge1xuICAgIHRoaXMuaXNTcGVlZHkgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMuc3BlZWR5ID09PSBcInVuZGVmaW5lZFwiID8gIV9fREVWX18gOiBvcHRpb25zLnNwZWVkeTtcbiAgICB0aGlzLnRhZ3MgPSBbXTtcbiAgICB0aGlzLmN0ciA9IDA7XG4gICAgdGhpcy5ub25jZSA9IG9wdGlvbnMubm9uY2U7XG4gICAgdGhpcy5jb250YWluZXIgPSBvcHRpb25zLmNvbnRhaW5lcjtcbiAgICB0aGlzLmJlZm9yZSA9IG51bGw7XG4gIH1cbiAgaW5zZXJ0KHJ1bGVzOiBzdHJpbmdbXSkge1xuICAgIC8vIHRoZSBtYXggbGVuZ3RoIGlzIGhvdyBtYW55IHJ1bGVzIHdlIGhhdmUgcGVyIHN0eWxlIHRhZywgaXQncyA2NTAwMCBpbiBzcGVlZHkgbW9kZVxuICAgIC8vIGl0J3MgMSBpbiBkZXYgYmVjYXVzZSB3ZSBpbnNlcnQgc291cmNlIG1hcHMgdGhhdCBtYXAgYSBzaW5nbGUgcnVsZSB0byBhIGxvY2F0aW9uXG4gICAgLy8gYW5kIHlvdSBjYW4gb25seSBoYXZlIG9uZSBzb3VyY2UgbWFwIHBlciBzdHlsZSB0YWdcbiAgICBpZiAodGhpcy5jdHIgJSAodGhpcy5pc1NwZWVkeSA/IDY1MDAwIDogMSkgPT09IDApIHtcbiAgICAgIGNvbnN0IHRhZyA9IGNyZWF0ZVN0eWxlRWxlbWVudCh0aGlzKTtcbiAgICAgIGxldCBiZWZvcmU7XG4gICAgICBpZiAodGhpcy50YWdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBiZWZvcmUgPSB0aGlzLmJlZm9yZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJlZm9yZSA9IHRoaXMudGFnc1t0aGlzLnRhZ3MubGVuZ3RoIC0gMV0ubmV4dFNpYmxpbmc7XG4gICAgICB9XG4gICAgICB0aGlzLmNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGFnLCBiZWZvcmUpO1xuICAgICAgdGhpcy50YWdzLnB1c2godGFnKTtcbiAgICB9XG4gICAgY29uc3QgdGFnID0gdGhpcy50YWdzW3RoaXMudGFncy5sZW5ndGggLSAxXTtcblxuICAgIGlmICh0aGlzLmlzU3BlZWR5KSB7XG4gICAgICBjb25zdCBzaGVldCA9IHNoZWV0Rm9yVGFnKHRhZyk7XG4gICAgICBydWxlcy5mb3JFYWNoKHJ1bGUgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIHRoaXMgaXMgdGhlIHVsdHJhZmFzdCB2ZXJzaW9uLCB3b3JrcyBhY3Jvc3MgYnJvd3NlcnNcbiAgICAgICAgICAvLyB0aGUgYmlnIGRyYXdiYWNrIGlzIHRoYXQgdGhlIGNzcyB3b24ndCBiZSBlZGl0YWJsZSBpbiBkZXZ0b29sc1xuICAgICAgICAgIHNoZWV0Lmluc2VydFJ1bGUocnVsZSwgc2hlZXQuY3NzUnVsZXMubGVuZ3RoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICBgVGhlcmUgd2FzIGEgcHJvYmxlbSBpbnNlcnRpbmcgdGhlIGZvbGxvd2luZyBydWxlOiBcIiR7cnVsZX1cImAsXG4gICAgICAgICAgICAgIGUsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShydWxlcy5qb2luKFwiXCIpKSk7XG4gICAgfVxuICAgIHRoaXMuY3RyKys7XG4gIH1cbiAgZmx1c2goKSB7XG4gICAgLy8gJEZsb3dGaXhNZVxuICAgIHRoaXMudGFncy5mb3JFYWNoKHRhZyA9PiB0YWcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YWcpKTtcbiAgICB0aGlzLnRhZ3MgPSBbXTtcbiAgICB0aGlzLmN0ciA9IDA7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBLFNBQVNBLFdBQVQsQ0FBcUJDLEdBQXJCLEVBQTJEO0VBQ3pELElBQUlBLEdBQUcsQ0FBQ0MsS0FBUixFQUFlO0lBQ2IsT0FBT0QsR0FBRyxDQUFDQyxLQUFYO0VBQ0QsQ0FId0QsQ0FLekQ7O0VBQ0E7OztFQUNBLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBR0MsUUFBUSxDQUFDQyxXQUFULENBQXFCQyxNQUF6QyxFQUFpREgsQ0FBQyxFQUFsRCxFQUFzRDtJQUNwRCxJQUFJQyxRQUFRLENBQUNDLFdBQVQsQ0FBcUJGLENBQXJCLEVBQXdCSSxTQUF4QixLQUFzQ04sR0FBMUMsRUFBK0M7TUFDN0M7TUFDQSxPQUFPRyxRQUFRLENBQUNDLFdBQVQsQ0FBcUJGLENBQXJCLENBQVA7SUFDRDtFQUNGO0FBQ0Y7O0FBUUQsU0FBU0ssa0JBQVQsQ0FBNEJDLE9BQTVCLEVBQStFO0VBQzdFLE1BQU1SLEdBQUcsR0FBR0csUUFBUSxDQUFDTSxhQUFULENBQXVCLE9BQXZCLENBQVo7O0VBQ0EsSUFBSSxPQUFPRCxPQUFPLENBQUNFLEtBQWYsS0FBeUIsV0FBN0IsRUFBMEM7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
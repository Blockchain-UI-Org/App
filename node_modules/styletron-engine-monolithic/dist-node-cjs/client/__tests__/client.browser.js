"use strict";

var _server = _interopRequireDefault(require("../../server/server"));

var _client = _interopRequireDefault(require("../client"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-env browser */
const reduce = Array.prototype.reduce;
const map = Array.prototype.map;
describe("client", () => {
  it("container config", () => {
    const instance = new _client.default();
    expect(instance.container).toBe(document.head);
  });
  it("automatic stylesheet insertion", () => {
    const container = document.createElement("div");
    document.body && document.body.appendChild(container);
    const instance = new _client.default({
      container
    });
    expect(instance.container).toStrictEqual(container); // lazy instantiation

    expect(document.styleSheets.length).toBe(0);
    expect(instance.renderStyle({
      color: "purple"
    })).toBe("css-hZftBk");
    expect(document.styleSheets.length).toBe(1);
    instance.container.remove();
    expect(document.styleSheets.length).toBe(0);
  });
  it("rendering", () => {
    const container = document.createElement("div");
    document.body && document.body.appendChild(container);
    const instance = new _client.default({
      container
    });
    expect(instance.renderStyle({
      color: "purple"
    })).toEqual("css-hZftBk");
    expect(sheetsToRules(document.styleSheets)).toEqual([{
      rules: [".css-hZftBk {color: purple;}"]
    }]);
    expect(instance.renderStyle({
      "@media (min-width: 800px)": {
        color: "purple"
      }
    })).toEqual("css-hrykRm");
    expect(sheetsToRules(document.styleSheets)).toEqual([{
      rules: [".css-hZftBk {color: purple;}"]
    }, {
      rules: ["@media (min-width: 800px) {.css-hrykRm {color: purple;}}"]
    }]);
    instance.renderStyle({
      userSelect: "none"
    });
    expect(sheetsToRules(document.styleSheets)).toEqual([{
      rules: [".css-hZftBk {color: purple;}"]
    }, {
      rules: ["@media (min-width: 800px) {.css-hrykRm {color: purple;}}"]
    }, {
      rules: [".css-eaGfYw {-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}"]
    }]);
    instance.renderStyle({
      display: "flex"
    });
    expect(sheetsToRules(document.styleSheets)).toEqual([{
      rules: [".css-hZftBk {color: purple;}"]
    }, {
      rules: ["@media (min-width: 800px) {.css-hrykRm {color: purple;}}"]
    }, {
      rules: [".css-eaGfYw {-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}"]
    }, {
      rules: [".css-haOmqK {display: flex;}"]
    }]);
    instance.renderStyle({
      "@media (min-width: 600px)": {
        color: "red"
      }
    });
    expect(sheetsToRules(document.styleSheets)).toEqual([{
      rules: [".css-hZftBk {color: purple;}"]
    }, {
      rules: ["@media (min-width: 800px) {.css-hrykRm {color: purple;}}"]
    }, {
      rules: [".css-eaGfYw {-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}"]
    }, {
      rules: [".css-haOmqK {display: flex;}"]
    }, {
      rules: ["@media (min-width: 600px) {.css-bWjoTf {color: red;}}"]
    }]);
    instance.container.remove();
  });
  it("prefix", () => {
    const container = document.createElement("div");
    document.body && document.body.appendChild(container);
    const instance = new _client.default({
      container,
      prefix: "foo_"
    });
    expect(instance.renderStyle({
      color: "purple"
    })).toBe("foo_css-hZftBk");
    expect(instance.renderFontFace({
      src: "url(blah)"
    })).toBe("foo_font-lfxDGs");
    expect(instance.renderKeyframes({
      from: {
        color: "red"
      },
      to: {
        color: "blue"
      }
    })).toBe("foo_animation-cmOXrn");
    expect(sheetsToRules(document.styleSheets)).toEqual([{
      rules: [".foo_css-hZftBk {color: purple;}"]
    }, {
      rules: ["@font-face {font-family: foo_font-lfxDGs; src: url(blah);}"]
    }, {
      rules: ["@keyframes foo_animation-cmOXrn { \n  from {color: red;} \n  to {color: blue;} \n}"]
    }]);
    instance.container.remove();
  });
  it("hydration", () => {
    const {
      getSheets,
      cleanup,
      container
    } = setup(); // SSR

    const server = new _server.default();
    injectFixtureStyles(server);
    container.innerHTML = server.getStylesheetsHtml(); // Hydration

    const instance = new _client.default({
      hydrate: getSheets()
    });
    const beforeSheetLength = document.styleSheets.length;
    const beforeRules = elementsToRules(getSheets());
    injectFixtureStyles(instance);
    const afterSheetLength = document.styleSheets.length;
    const afterRules = elementsToRules(getSheets());
    expect(beforeSheetLength).toBe(afterSheetLength);
    expect(afterRules).toEqual(beforeRules);
    instance.renderStyle({
      margin: "10px"
    });
    const afterMarginRules = elementsToRules(getSheets());
    expect(afterMarginRules).toEqual([...afterRules, {
      rules: [".css-iMIAew {margin: 10px;}"]
    }]);
    cleanup();
  });
  it("StyletronClient deeply nested rules", () => {
    const container = document.createElement("div");
    document.body && document.body.appendChild(container);
    const instance = new _client.default({
      container
    });
    expect(instance.renderStyle({
      "@supports (flex-wrap: wrap)": {
        "@media (min-width: 50em)": {
          ":hover": {
            background: "blue"
          }
        }
      }
    })).toBe("css-gPyDTX");
    expect(sheetsToRules(document.styleSheets)).toEqual([{
      rules: ["@supports (flex-wrap: wrap) {@media (min-width: 50em) {.css-gPyDTX:hover {background: blue;}}}"]
    }]);
    instance.container.remove();
  });
});

function injectFixtureStyles(styletron) {
  styletron.renderStyle({
    color: "red"
  });
  styletron.renderStyle({
    color: "green"
  });
  styletron.renderStyle({
    "@media (min-width: 800px)": {
      color: "green"
    }
  });
  styletron.renderStyle({
    "@media (min-width: 600px)": {
      color: "red"
    }
  });
  styletron.renderStyle({
    "@media (min-width: 800px)": {
      ":hover": {
        color: "green"
      }
    }
  });
  styletron.renderStyle({
    ":hover": {
      display: "none"
    }
  });
  styletron.renderStyle({
    userSelect: "none"
  });
  styletron.renderStyle({
    display: "flex"
  });
  styletron.renderFontFace({
    src: "url(blah)"
  });
  styletron.renderKeyframes({
    from: {
      color: "red"
    },
    to: {
      color: "blue"
    }
  });
}

function setup() {
  const container = document.createElement("div");

  if (document.body === void 0) {
    throw new Error("no body");
  }

  if (document.body === null) {
    throw new Error("body is null");
  }

  document.body.appendChild(container);
  return {
    container,

    getSheets() {
      return container.children;
    },

    cleanup() {
      container.remove();
    }

  };
}

function sheetToRules(sheet) {
  return reduce.call(sheet.cssRules, (acc, rule) => {
    return [...acc, rule.cssText];
  }, []);
}

function elementsToRules(elements) {
  return sheetsToRules(map.call(elements, el => el.sheet));
}

function sheetsToRules(sheets) {
  return reduce.call(sheets, (acc, sheet) => {
    return [...acc, {
      rules: sheetToRules(sheet)
    }];
  }, []);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWR1Y2UiLCJBcnJheSIsInByb3RvdHlwZSIsIm1hcCIsImRlc2NyaWJlIiwiaXQiLCJpbnN0YW5jZSIsIlN0eWxldHJvbkNsaWVudCIsImV4cGVjdCIsImNvbnRhaW5lciIsInRvQmUiLCJkb2N1bWVudCIsImhlYWQiLCJjcmVhdGVFbGVtZW50IiwiYm9keSIsImFwcGVuZENoaWxkIiwidG9TdHJpY3RFcXVhbCIsInN0eWxlU2hlZXRzIiwibGVuZ3RoIiwicmVuZGVyU3R5bGUiLCJjb2xvciIsInJlbW92ZSIsInRvRXF1YWwiLCJzaGVldHNUb1J1bGVzIiwicnVsZXMiLCJ1c2VyU2VsZWN0IiwiZGlzcGxheSIsInByZWZpeCIsInJlbmRlckZvbnRGYWNlIiwic3JjIiwicmVuZGVyS2V5ZnJhbWVzIiwiZnJvbSIsInRvIiwiZ2V0U2hlZXRzIiwiY2xlYW51cCIsInNldHVwIiwic2VydmVyIiwiU3R5bGV0cm9uU2VydmVyIiwiaW5qZWN0Rml4dHVyZVN0eWxlcyIsImlubmVySFRNTCIsImdldFN0eWxlc2hlZXRzSHRtbCIsImh5ZHJhdGUiLCJiZWZvcmVTaGVldExlbmd0aCIsImJlZm9yZVJ1bGVzIiwiZWxlbWVudHNUb1J1bGVzIiwiYWZ0ZXJTaGVldExlbmd0aCIsImFmdGVyUnVsZXMiLCJtYXJnaW4iLCJhZnRlck1hcmdpblJ1bGVzIiwiYmFja2dyb3VuZCIsInN0eWxldHJvbiIsIkVycm9yIiwiY2hpbGRyZW4iLCJzaGVldFRvUnVsZXMiLCJzaGVldCIsImNhbGwiLCJjc3NSdWxlcyIsImFjYyIsInJ1bGUiLCJjc3NUZXh0IiwiZWxlbWVudHMiLCJlbCIsInNoZWV0cyJdLCJzb3VyY2VzIjpbInNyYy9jbGllbnQvX190ZXN0c19fL2NsaWVudC5icm93c2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG5pbXBvcnQgU3R5bGV0cm9uU2VydmVyIGZyb20gXCIuLi8uLi9zZXJ2ZXIvc2VydmVyXCI7XG5pbXBvcnQgU3R5bGV0cm9uQ2xpZW50IGZyb20gXCIuLi9jbGllbnRcIjtcbmNvbnN0IHJlZHVjZSA9IEFycmF5LnByb3RvdHlwZS5yZWR1Y2U7XG5jb25zdCBtYXAgPSBBcnJheS5wcm90b3R5cGUubWFwO1xuXG5kZXNjcmliZShcImNsaWVudFwiLCAoKSA9PiB7XG4gIGl0KFwiY29udGFpbmVyIGNvbmZpZ1wiLCAoKSA9PiB7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgU3R5bGV0cm9uQ2xpZW50KCk7XG4gICAgZXhwZWN0KGluc3RhbmNlLmNvbnRhaW5lcikudG9CZShkb2N1bWVudC5oZWFkKTtcbiAgfSk7XG5cbiAgaXQoXCJhdXRvbWF0aWMgc3R5bGVzaGVldCBpbnNlcnRpb25cIiwgKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgU3R5bGV0cm9uQ2xpZW50KHtjb250YWluZXJ9KTtcbiAgICBleHBlY3QoaW5zdGFuY2UuY29udGFpbmVyKS50b1N0cmljdEVxdWFsKGNvbnRhaW5lcik7XG4gICAgLy8gbGF6eSBpbnN0YW50aWF0aW9uXG4gICAgZXhwZWN0KGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aCkudG9CZSgwKTtcbiAgICBleHBlY3QoaW5zdGFuY2UucmVuZGVyU3R5bGUoe2NvbG9yOiBcInB1cnBsZVwifSkpLnRvQmUoXCJjc3MtaFpmdEJrXCIpO1xuICAgIGV4cGVjdChkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgaW5zdGFuY2UuY29udGFpbmVyLnJlbW92ZSgpO1xuICAgIGV4cGVjdChkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGgpLnRvQmUoMCk7XG4gIH0pO1xuXG4gIGl0KFwicmVuZGVyaW5nXCIsICgpID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGRvY3VtZW50LmJvZHkgJiYgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IFN0eWxldHJvbkNsaWVudCh7Y29udGFpbmVyfSk7XG4gICAgZXhwZWN0KGluc3RhbmNlLnJlbmRlclN0eWxlKHtjb2xvcjogXCJwdXJwbGVcIn0pKS50b0VxdWFsKFwiY3NzLWhaZnRCa1wiKTtcbiAgICBleHBlY3Qoc2hlZXRzVG9SdWxlcyhkb2N1bWVudC5zdHlsZVNoZWV0cykpLnRvRXF1YWwoW1xuICAgICAge3J1bGVzOiBbXCIuY3NzLWhaZnRCayB7Y29sb3I6IHB1cnBsZTt9XCJdfSxcbiAgICBdKTtcbiAgICBleHBlY3QoXG4gICAgICBpbnN0YW5jZS5yZW5kZXJTdHlsZSh7XG4gICAgICAgIFwiQG1lZGlhIChtaW4td2lkdGg6IDgwMHB4KVwiOiB7Y29sb3I6IFwicHVycGxlXCJ9LFxuICAgICAgfSksXG4gICAgKS50b0VxdWFsKFwiY3NzLWhyeWtSbVwiKTtcblxuICAgIGV4cGVjdChzaGVldHNUb1J1bGVzKGRvY3VtZW50LnN0eWxlU2hlZXRzKSkudG9FcXVhbChbXG4gICAgICB7XG4gICAgICAgIHJ1bGVzOiBbXCIuY3NzLWhaZnRCayB7Y29sb3I6IHB1cnBsZTt9XCJdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcnVsZXM6IFtcIkBtZWRpYSAobWluLXdpZHRoOiA4MDBweCkgey5jc3MtaHJ5a1JtIHtjb2xvcjogcHVycGxlO319XCJdLFxuICAgICAgfSxcbiAgICBdKTtcblxuICAgIGluc3RhbmNlLnJlbmRlclN0eWxlKHt1c2VyU2VsZWN0OiBcIm5vbmVcIn0pO1xuICAgIGV4cGVjdChzaGVldHNUb1J1bGVzKGRvY3VtZW50LnN0eWxlU2hlZXRzKSkudG9FcXVhbChbXG4gICAgICB7cnVsZXM6IFtcIi5jc3MtaFpmdEJrIHtjb2xvcjogcHVycGxlO31cIl19LFxuICAgICAge1xuICAgICAgICBydWxlczogW1wiQG1lZGlhIChtaW4td2lkdGg6IDgwMHB4KSB7LmNzcy1ocnlrUm0ge2NvbG9yOiBwdXJwbGU7fX1cIl0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBydWxlczogW1xuICAgICAgICAgIFwiLmNzcy1lYUdmWXcgey13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IC1tcy11c2VyLXNlbGVjdDogbm9uZTsgdXNlci1zZWxlY3Q6IG5vbmU7fVwiLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICBdKTtcblxuICAgIGluc3RhbmNlLnJlbmRlclN0eWxlKHtkaXNwbGF5OiBcImZsZXhcIn0pO1xuICAgIGV4cGVjdChzaGVldHNUb1J1bGVzKGRvY3VtZW50LnN0eWxlU2hlZXRzKSkudG9FcXVhbChbXG4gICAgICB7cnVsZXM6IFtcIi5jc3MtaFpmdEJrIHtjb2xvcjogcHVycGxlO31cIl19LFxuICAgICAge1xuICAgICAgICBydWxlczogW1wiQG1lZGlhIChtaW4td2lkdGg6IDgwMHB4KSB7LmNzcy1ocnlrUm0ge2NvbG9yOiBwdXJwbGU7fX1cIl0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBydWxlczogW1xuICAgICAgICAgIFwiLmNzcy1lYUdmWXcgey13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7IC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7IC1tcy11c2VyLXNlbGVjdDogbm9uZTsgdXNlci1zZWxlY3Q6IG5vbmU7fVwiLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICAgIHtydWxlczogW1wiLmNzcy1oYU9tcUsge2Rpc3BsYXk6IGZsZXg7fVwiXX0sXG4gICAgXSk7XG5cbiAgICBpbnN0YW5jZS5yZW5kZXJTdHlsZSh7XG4gICAgICBcIkBtZWRpYSAobWluLXdpZHRoOiA2MDBweClcIjoge1xuICAgICAgICBjb2xvcjogXCJyZWRcIixcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgZXhwZWN0KHNoZWV0c1RvUnVsZXMoZG9jdW1lbnQuc3R5bGVTaGVldHMpKS50b0VxdWFsKFtcbiAgICAgIHtydWxlczogW1wiLmNzcy1oWmZ0Qmsge2NvbG9yOiBwdXJwbGU7fVwiXX0sXG4gICAgICB7XG4gICAgICAgIHJ1bGVzOiBbXCJAbWVkaWEgKG1pbi13aWR0aDogODAwcHgpIHsuY3NzLWhyeWtSbSB7Y29sb3I6IHB1cnBsZTt9fVwiXSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHJ1bGVzOiBbXG4gICAgICAgICAgXCIuY3NzLWVhR2ZZdyB7LXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsgLW1vei11c2VyLXNlbGVjdDogbm9uZTsgLW1zLXVzZXItc2VsZWN0OiBub25lOyB1c2VyLXNlbGVjdDogbm9uZTt9XCIsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgICAge3J1bGVzOiBbXCIuY3NzLWhhT21xSyB7ZGlzcGxheTogZmxleDt9XCJdfSxcbiAgICAgIHtcbiAgICAgICAgcnVsZXM6IFtcIkBtZWRpYSAobWluLXdpZHRoOiA2MDBweCkgey5jc3MtYldqb1RmIHtjb2xvcjogcmVkO319XCJdLFxuICAgICAgfSxcbiAgICBdKTtcblxuICAgIGluc3RhbmNlLmNvbnRhaW5lci5yZW1vdmUoKTtcbiAgfSk7XG5cbiAgaXQoXCJwcmVmaXhcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgY29uc3QgaW5zdGFuY2UgPSBuZXcgU3R5bGV0cm9uQ2xpZW50KHtjb250YWluZXIsIHByZWZpeDogXCJmb29fXCJ9KTtcbiAgICBleHBlY3QoaW5zdGFuY2UucmVuZGVyU3R5bGUoe2NvbG9yOiBcInB1cnBsZVwifSkpLnRvQmUoXCJmb29fY3NzLWhaZnRCa1wiKTtcbiAgICBleHBlY3QoaW5zdGFuY2UucmVuZGVyRm9udEZhY2Uoe3NyYzogXCJ1cmwoYmxhaClcIn0pKS50b0JlKFwiZm9vX2ZvbnQtbGZ4REdzXCIpO1xuICAgIGV4cGVjdChcbiAgICAgIGluc3RhbmNlLnJlbmRlcktleWZyYW1lcyh7ZnJvbToge2NvbG9yOiBcInJlZFwifSwgdG86IHtjb2xvcjogXCJibHVlXCJ9fSksXG4gICAgKS50b0JlKFwiZm9vX2FuaW1hdGlvbi1jbU9Ycm5cIik7XG5cbiAgICBleHBlY3Qoc2hlZXRzVG9SdWxlcyhkb2N1bWVudC5zdHlsZVNoZWV0cykpLnRvRXF1YWwoW1xuICAgICAge3J1bGVzOiBbXCIuZm9vX2Nzcy1oWmZ0Qmsge2NvbG9yOiBwdXJwbGU7fVwiXX0sXG4gICAgICB7XG4gICAgICAgIHJ1bGVzOiBbXCJAZm9udC1mYWNlIHtmb250LWZhbWlseTogZm9vX2ZvbnQtbGZ4REdzOyBzcmM6IHVybChibGFoKTt9XCJdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgcnVsZXM6IFtcbiAgICAgICAgICBcIkBrZXlmcmFtZXMgZm9vX2FuaW1hdGlvbi1jbU9Ycm4geyBcXG4gIGZyb20ge2NvbG9yOiByZWQ7fSBcXG4gIHRvIHtjb2xvcjogYmx1ZTt9IFxcbn1cIixcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgXSk7XG5cbiAgICBpbnN0YW5jZS5jb250YWluZXIucmVtb3ZlKCk7XG4gIH0pO1xuXG4gIGl0KFwiaHlkcmF0aW9uXCIsICgpID0+IHtcbiAgICBjb25zdCB7Z2V0U2hlZXRzLCBjbGVhbnVwLCBjb250YWluZXJ9ID0gc2V0dXAoKTtcblxuICAgIC8vIFNTUlxuICAgIGNvbnN0IHNlcnZlciA9IG5ldyBTdHlsZXRyb25TZXJ2ZXIoKTtcbiAgICBpbmplY3RGaXh0dXJlU3R5bGVzKHNlcnZlcik7XG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IHNlcnZlci5nZXRTdHlsZXNoZWV0c0h0bWwoKTtcblxuICAgIC8vIEh5ZHJhdGlvblxuICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IFN0eWxldHJvbkNsaWVudCh7XG4gICAgICBoeWRyYXRlOiBnZXRTaGVldHMoKSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGJlZm9yZVNoZWV0TGVuZ3RoID0gZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoO1xuICAgIGNvbnN0IGJlZm9yZVJ1bGVzID0gZWxlbWVudHNUb1J1bGVzKGdldFNoZWV0cygpKTtcbiAgICBpbmplY3RGaXh0dXJlU3R5bGVzKGluc3RhbmNlKTtcbiAgICBjb25zdCBhZnRlclNoZWV0TGVuZ3RoID0gZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoO1xuICAgIGNvbnN0IGFmdGVyUnVsZXMgPSBlbGVtZW50c1RvUnVsZXMoZ2V0U2hlZXRzKCkpO1xuXG4gICAgZXhwZWN0KGJlZm9yZVNoZWV0TGVuZ3RoKS50b0JlKGFmdGVyU2hlZXRMZW5ndGgpO1xuICAgIGV4cGVjdChhZnRlclJ1bGVzKS50b0VxdWFsKGJlZm9yZVJ1bGVzKTtcbiAgICBpbnN0YW5jZS5yZW5kZXJTdHlsZSh7bWFyZ2luOiBcIjEwcHhcIn0pO1xuXG4gICAgY29uc3QgYWZ0ZXJNYXJnaW5SdWxlcyA9IGVsZW1lbnRzVG9SdWxlcyhnZXRTaGVldHMoKSk7XG4gICAgZXhwZWN0KGFmdGVyTWFyZ2luUnVsZXMpLnRvRXF1YWwoW1xuICAgICAgLi4uYWZ0ZXJSdWxlcyxcbiAgICAgIHtydWxlczogW1wiLmNzcy1pTUlBZXcge21hcmdpbjogMTBweDt9XCJdfSxcbiAgICBdKTtcblxuICAgIGNsZWFudXAoKTtcbiAgfSk7XG5cbiAgaXQoXCJTdHlsZXRyb25DbGllbnQgZGVlcGx5IG5lc3RlZCBydWxlc1wiLCAoKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkb2N1bWVudC5ib2R5ICYmIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBTdHlsZXRyb25DbGllbnQoe2NvbnRhaW5lcn0pO1xuXG4gICAgZXhwZWN0KFxuICAgICAgaW5zdGFuY2UucmVuZGVyU3R5bGUoe1xuICAgICAgICBcIkBzdXBwb3J0cyAoZmxleC13cmFwOiB3cmFwKVwiOiB7XG4gICAgICAgICAgXCJAbWVkaWEgKG1pbi13aWR0aDogNTBlbSlcIjoge1xuICAgICAgICAgICAgXCI6aG92ZXJcIjoge1xuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcImJsdWVcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pLFxuICAgICkudG9CZShcImNzcy1nUHlEVFhcIik7XG5cbiAgICBleHBlY3Qoc2hlZXRzVG9SdWxlcyhkb2N1bWVudC5zdHlsZVNoZWV0cykpLnRvRXF1YWwoW1xuICAgICAge1xuICAgICAgICBydWxlczogW1xuICAgICAgICAgIFwiQHN1cHBvcnRzIChmbGV4LXdyYXA6IHdyYXApIHtAbWVkaWEgKG1pbi13aWR0aDogNTBlbSkgey5jc3MtZ1B5RFRYOmhvdmVyIHtiYWNrZ3JvdW5kOiBibHVlO319fVwiLFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICBdKTtcblxuICAgIGluc3RhbmNlLmNvbnRhaW5lci5yZW1vdmUoKTtcbiAgfSk7XG59KTtcblxuZnVuY3Rpb24gaW5qZWN0Rml4dHVyZVN0eWxlcyhzdHlsZXRyb24pIHtcbiAgc3R5bGV0cm9uLnJlbmRlclN0eWxlKHtjb2xvcjogXCJyZWRcIn0pO1xuICBzdHlsZXRyb24ucmVuZGVyU3R5bGUoe2NvbG9yOiBcImdyZWVuXCJ9KTtcbiAgc3R5bGV0cm9uLnJlbmRlclN0eWxlKHtcbiAgICBcIkBtZWRpYSAobWluLXdpZHRoOiA4MDBweClcIjoge1xuICAgICAgY29sb3I6IFwiZ3JlZW5cIixcbiAgICB9LFxuICB9KTtcbiAgc3R5bGV0cm9uLnJlbmRlclN0eWxlKHtcbiAgICBcIkBtZWRpYSAobWluLXdpZHRoOiA2MDBweClcIjoge1xuICAgICAgY29sb3I6IFwicmVkXCIsXG4gICAgfSxcbiAgfSk7XG4gIHN0eWxldHJvbi5yZW5kZXJTdHlsZSh7XG4gICAgXCJAbWVkaWEgKG1pbi13aWR0aDogODAwcHgpXCI6IHtcbiAgICAgIFwiOmhvdmVyXCI6IHtcbiAgICAgICAgY29sb3I6IFwiZ3JlZW5cIixcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG4gIHN0eWxldHJvbi5yZW5kZXJTdHlsZSh7XG4gICAgXCI6aG92ZXJcIjoge1xuICAgICAgZGlzcGxheTogXCJub25lXCIsXG4gICAgfSxcbiAgfSk7XG4gIHN0eWxldHJvbi5yZW5kZXJTdHlsZSh7XG4gICAgdXNlclNlbGVjdDogXCJub25lXCIsXG4gIH0pO1xuICBzdHlsZXRyb24ucmVuZGVyU3R5bGUoe1xuICAgIGRpc3BsYXk6IFwiZmxleFwiLFxuICB9KTtcbiAgc3R5bGV0cm9uLnJlbmRlckZvbnRGYWNlKHtzcmM6IFwidXJsKGJsYWgpXCJ9KTtcbiAgc3R5bGV0cm9uLnJlbmRlcktleWZyYW1lcyh7ZnJvbToge2NvbG9yOiBcInJlZFwifSwgdG86IHtjb2xvcjogXCJibHVlXCJ9fSk7XG59XG5cbmZ1bmN0aW9uIHNldHVwKCkge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBpZiAoZG9jdW1lbnQuYm9keSA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwibm8gYm9keVwiKTtcbiAgfVxuXG4gIGlmIChkb2N1bWVudC5ib2R5ID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiYm9keSBpcyBudWxsXCIpO1xuICB9XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblxuICByZXR1cm4ge1xuICAgIGNvbnRhaW5lcixcbiAgICBnZXRTaGVldHMoKSB7XG4gICAgICByZXR1cm4gY29udGFpbmVyLmNoaWxkcmVuO1xuICAgIH0sXG4gICAgY2xlYW51cCgpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9LFxuICB9O1xufVxuXG5mdW5jdGlvbiBzaGVldFRvUnVsZXMoc2hlZXQpIHtcbiAgcmV0dXJuIHJlZHVjZS5jYWxsKFxuICAgIHNoZWV0LmNzc1J1bGVzLFxuICAgIChhY2MsIHJ1bGUpID0+IHtcbiAgICAgIHJldHVybiBbLi4uYWNjLCBydWxlLmNzc1RleHRdO1xuICAgIH0sXG4gICAgW10sXG4gICk7XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRzVG9SdWxlcyhlbGVtZW50cykge1xuICByZXR1cm4gc2hlZXRzVG9SdWxlcyhtYXAuY2FsbChlbGVtZW50cywgZWwgPT4gZWwuc2hlZXQpKTtcbn1cblxuZnVuY3Rpb24gc2hlZXRzVG9SdWxlcyhzaGVldHMpIHtcbiAgcmV0dXJuIHJlZHVjZS5jYWxsKFxuICAgIHNoZWV0cyxcbiAgICAoYWNjLCBzaGVldCkgPT4ge1xuICAgICAgcmV0dXJuIFsuLi5hY2MsIHtydWxlczogc2hlZXRUb1J1bGVzKHNoZWV0KX1dO1xuICAgIH0sXG4gICAgW10sXG4gICk7XG59XG4iXSwibWFwcGluZ3MiOiI7O0FBRUE7O0FBQ0E7Ozs7QUFIQTtBQUlBLE1BQU1BLE1BQU0sR0FBR0MsS0FBSyxDQUFDQyxTQUFOLENBQWdCRixNQUEvQjtBQUNBLE1BQU1HLEdBQUcsR0FBR0YsS0FBSyxDQUFDQyxTQUFOLENBQWdCQyxHQUE1QjtBQUVBQyxRQUFRLENBQUMsUUFBRCxFQUFXLE1BQU07RUFDdkJDLEVBQUUsQ0FBQyxrQkFBRCxFQUFxQixNQUFNO0lBQzNCLE1BQU1DLFFBQVEsR0FBRyxJQUFJQyxlQUFKLEVBQWpCO0lBQ0FDLE1BQU0sQ0FBQ0YsUUFBUSxDQUFDRyxTQUFWLENBQU4sQ0FBMkJDLElBQTNCLENBQWdDQyxRQUFRLENBQUNDLElBQXpDO0VBQ0QsQ0FIQyxDQUFGO0VBS0FQLEVBQUUsQ0FBQyxnQ0FBRCxFQUFtQyxNQUFNO0lBQ3pDLE1BQU1JLFNBQVMsR0FBR0UsUUFBUSxDQUFDRSxhQUFULENBQXVCLEtBQXZCLENBQWxCO0lBQ0FGLFFBQVEsQ0FBQ0csSUFB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